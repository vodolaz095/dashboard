web_ui:
  listen: "0.0.0.0:3000"
  domain: "localhost"
  title: "dashboard"
  description: "dashboard"
  keywords:
    - "dashboard"
    - "vodolaz095"
    - "golang"
    - "redis"
    - "postgresql"
    - "mysql"
  do_index: true
  path_to_header: ./contrib/header.html
  path_to_footer: ./contrib/footer.html

log:
  level: trace
  to_journald: false

database_connections:
  - name: redis@container
    type: redis
    connection_string: "redis://127.0.0.1:6379"
  - name: subscribe2redis@container
    type: redis
    connection_string: "redis://127.0.0.1:6379"
  - name: mysql@container
    type: mysql
    connection_string: "root:dashboard@tcp(127.0.0.1:3306)/dashboard"
  - name: postgres@container
    type: postgres
    connection_string: "postgres://dashboard:dashboard@127.0.0.1:5432/dashboard"

sensors:
#  - name: echo
#    type: shell
#    command: 'echo 4'
#    description: "Get random value from shell"
#    refresh_rate: 5s
#    link: "http://example.org"
#    tags:
#      a: b
#      c: d
#
  - name: endpoint
    type: endpoint
    description: "Update value by incoming POST request"
    link: "http://localhost:3000/endpoint"
    token: "test321"

  - name: redis
    type: redis
    description: "Get value of redis key a"
    link: "https://example.org"
    connection_name: "redis@container"
    query: "get a"
    refresh_rate: 5s
    tags:
      kind: database

  - name: mysql
    type: mysql
    description: "Select random number from range"
    link: "https://dev.mysql.com/doc/refman/8.0/en/mathematical-functions.html#function_rand"
    connection_name: "mysql@container"
    query: "SELECT rand()*99+1 as random"
    minimum: 1
    maximum: 100
    refresh_rate: 5s
    tags:
      dialect: sql
      kind: database

  - name: postgres
    type: postgres
    description: "Select random number from range"
    link: "https://www.postgresql.org/docs/current/functions-math.html"
    connection_name: "postgres@container"
    query: "SELECT random()*99+1 as random"
    minimum: 1
    maximum: 100
    refresh_rate: 5s
    tags:
      dialect: sql
      kind: database

  - name: thermal0
    type: file
    description: "Get thermal sensor status from area 0"
    link: "https://example.org"
    path_to_reading: /sys/class/thermal/thermal_zone0/temp
    a: 0.001
    b: 0
    minimum: 1
    maximum: 100
    refresh_rate: 5s
    tags:
      kind: thermal

  - name: redis subscriber
    type: subscriber
    description: "Subscribe to redis channel and get values from it"
    channel: "vodolaz095/dashboard/subscriber"
    connection_name: "subscribe2redis@container"
    value_only: true
    minimum: 1
    maximum: 100
    tags:
      a: b
      c: d
      kind: database


broadcasters:
  - connection_name: redis@container
    subject: "vodolaz095/dashboard/sensor/%s"
    value_only: false
  - connection_name: redis@container
    subject: "vodolaz095/dashboard/value/%s"
    value_only: true
